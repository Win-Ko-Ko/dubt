<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Data Table</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; }
        table { width: 100%; border-collapse: collapse; }
        th, td { padding: 8px; text-align: left; border: 1px solid #ddd;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        th { background-color: #f2f2f2; }
        button { padding: 10px; margin: 5px; border: none; cursor: pointer; }
    </style>
</head>
<body>
    <h2>အကြွေးစာရင်း</h2>
    <p>ဆပ်ထားသောနေ့စွဲများ အလိုက်အကျဉ်းချုံး ကြည့်လိုလျှင် ခလုတ်များကိုနှိပ်ပါ။</p>
    <p>နေ့စွဲအုပ်စုအလိုက် အ‌ရောင်ခြယ်ပေးထားပါသည်။ အားလုံး ပြန်ကြည့်လိုပါက အားလုံးပြ ကိုနှိပ်ပါ။</p>
    <table id="csvTable" class="display">
        <thead>
            <tr>
                <th>စဉ်</th>
                <th>ချေးယူရက်</th>
                <th>ပမာဏ</th>
                <th>ပြန်ဆပ်ရက်</th>
                <th>လပေါင်း</th>
                <th>အတိုး</th>
                <th>အတိုးအရင်း</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>

    <script>
        $(document).ready(function() {
            var csvData = `1,05/01/2020,1600000,စာရင်းမသွင်းမီ,-,-,-
2,19/02/2020,370000,စာရင်းမသွင်းမီ,-,-,-
3,26/03/2020,100000,စာရင်းမသွင်းမီ,-,-,-
4,11/04/2020,200000,စာရင်းမသွင်းမီ,-,-,-
5,24/04/2020,250000,စာရင်းမသွင်းမီ,-,-,-
6,05/05/2020,700000,စာရင်းမသွင်းမီ,-,-,-
7,07/05/2020,100000,စာရင်းမသွင်းမီ,-,-,-
8,12/05/2020,50000,စာရင်းမသွင်းမီ,-,-,-
9,22/05/2020,900000,စာရင်းမသွင်းမီ,-,-,-
10,06/06/2020,100000,စာရင်းမသွင်းမီ,-,-,-
11,13/06/2020,100000,စာရင်းမသွင်းမီ,-,-,-
12,21/06/2020,100000,စာရင်းမသွင်းမီ,-,-,-
13,08/07/2020,250000,စာရင်းမသွင်းမီ,-,-,-
14,18/07/2020,100000,29/11/2022,28,84000,184000
15,21/07/2020,100000,29/11/2022,28,84000,184000
16,24/07/2020,50000,29/11/2022,28,42000,92000
17,15/08/2020,300000,29/11/2022,27,243000,543000
18,04/10/2020,600000,29/11/2022,26,468000,1068000
19,09/10/2020,350000,29/11/2022,26,273000,623000
20,13/10/2020,350000,29/11/2022,26,273000,623000
21,30/10/2020,700000,29/11/2022,25,525000,1225000
22,08/11/2020,400000,29/11/2022,25,300000,700000
23,13/11/2020,600000,29/11/2022,25,450000,1050000
24,14/12/2020,750000,စာရင်းမသွင်းမီ,-,-,-
25,14/12/2020,600000,29/11/2022,24,432000,1032000
26,15/05/2021,300000,29/11/2022,18,162000,462000
27,22/05/2021,200000,19/01/2023,20,120000,320000
28,06/07/2021,300000,19/01/2023,18,162000,462000
29,14/07/2021,400000,19/01/2023,18,216000,616000
30,25/07/2021,100000,19/01/2023,18,54000,154000
31,10/09/2021,200000,19/01/2023,16,96000,296000
32,17/10/2021,600000,19/01/2023,15,270000,870000
33,23/10/2021,100000,19/01/2023,15,45000,145000
34,24/10/2021,250000,19/01/2023,15,112500,362500
35,31/10/2021,200000,19/01/2023,15,90000,290000
36,14/11/2021,1800000,19/01/2023,14,756000,2556000
37,08/12/2021,500000,19/01/2023,13,195000,695000
38,04/01/2022,1700000,19/01/2023,12,612000,2312000
39,07/03/2022,100000,10/12/2023,21,63000,163000
40,18/03/2022,100000,10/12/2023,21,63000,163000
41,21/03/2022,100000,10/12/2023,21,63000,163000
42,26/03/2022,100000,10/12/2023,20,60000,160000
43,29/03/2022,1000000,10/12/2023,20,600000,1600000
44,06/04/2022,300000,10/12/2023,20,180000,480000
45,09/04/2022,200000,10/12/2023,20,120000,320000
46,22/04/2022,300000,10/12/2023,20,180000,480000
47,30/04/2022,100000,10/12/2023,19,57000,157000
48,07/05/2022,100000,10/12/2023,19,57000,157000
49,08/05/2022,100000,10/12/2023,19,57000,157000
50,21/05/2022,800000,10/12/2023,19,456000,1256000
51,29/05/2022,100000,10/12/2023,18,54000,154000
52,31/05/2022,100000,10/12/2023,18,54000,154000
53,03/07/2022,400000,10/12/2023,17,204000,604000
54,08/07/2022,100000,10/12/2023,17,51000,151000
55,18/07/2022,100000,10/12/2023,17,51000,151000
56,26/07/2022,200000,29/11/2022,4,24000,224000
57,06/08/2022,1300000,10/12/2023,16,624000,1924000
58,07/08/2022,100000,10/12/2023,16,48000,148000
59,04/09/2022,100000,10/12/2023,15,45000,145000
60,10/09/2022,350000,10/12/2023,15,157500,507500
61,14/10/2022,500000,10/12/2023,14,210000,710000
62,17/10/2022,200000,10/12/2023,14,84000,284000
63,19/10/2022,200000,10/12/2023,14,84000,284000
64,25/10/2022,400000,10/12/2023,14,168000,568000
65,10/11/2022,600000,10/12/2023,13,234000,834000
66,13/11/2022,500000,10/12/2023,13,195000,695000
67,04/12/2022,1000000,01/01/2025,25,750000,1750000
68,08/12/2022,500000,01/01/2025,25,375000,875000
69,14/12/2022,500000,01/01/2025,25,375000,875000
70,06/01/2023,500000,01/01/2025,24,360000,860000
71,14/03/2023,200000,10/12/2023,9,54000,254000
72,18/03/2023,400000,01/01/2025,21,252000,652000
73,30/06/2023,400000,01/01/2025,18,216000,616000
74,04/04/2024,1500000,04/02/2025,10,450000,1950000
75,11/04/2024,300000,04/02/2025,10,90000,390000
76,17/04/2024,400000,04/02/2025,10,120000,520000
77,23/04/2024,300000,04/02/2025,9,81000,381000
78,16/04/2024,1000000,04/02/2025,10,300000,1300000
79,20/05/2024,1000000,04/02/2025,8,240000,1240000
80,24/05/2024,800000,20/02/2025,9,216000,1016000
81,01/06/2024,2200000,မဆပ်ရသေး,-,-,-
82,09/06/2024,300000,20/02/2025,8,72000,372000
83,20/07/2024,450000,20/02/2025,7,94500,544500
84,22/08/2024,200000,20/02/2025,6,36000,236000
85,23/08/2024,100000,20/02/2025,6,18000,118000
86,05/09/2024,200000,04/02/2025,5,30000,230000
87,15/09/2024,5200000,မဆပ်ရသေး,-,-,-
88,14/10/2024,500000,မဆပ်ရသေး,-,-,-
89,15/11/2024,8000000,မဆပ်ရသေး,-,-,-
90,17/12/2024,2055000,မဆပ်ရသေး,-,-,-
91,13/01/2025,700000,20/02/2025,1,21000,721000
92,20/01/2025,200000,မဆပ်ရသေး,-,-,-
93,23/01/2025,200000,မဆပ်ရသေး,-,-,-`;
            
            var rows = csvData.split("\n");
            //get groups from column 4
            var groups = rows.map(row => row.split(",")[3]);
            var uniqueGroups = [...new Set(groups)];
            //add buttons before table
            uniqueGroups.forEach(group => {
                $("#csvTable").before(`<button onclick="filterTable('${group}')">${group}</button>`);
            });
            //also add a button to show all
            $("#csvTable").before(`<button onclick="filterTable('')">အားလုံးပြ</button>`);
            //filter table function
            window.filterTable = function(group) {
                //search and draw table
                $('#csvTable').DataTable().search(group).draw();
            };
            //set random color for each group not too dark
            var colors = {};
            var dark_colors = {};
            uniqueGroups.forEach(group => {
                var random_num = Math.random() * 360;
                colors[group] = `hsl(${random_num}, 80%, 90%)`;
                dark_colors[group] = `hsl(${random_num}, 100%, 30%)`;
            });
            //set background color of buttons to match group color
            $("button").each(function() {
                var group = $(this).text();
                $(this).css("background-color", colors[group]);
            });
            //draw table
            rows.forEach(function(row) {
                var cols = row.split(",");

                var tr = "<tr>" + cols.map(col => `<td>${col}</td>`).join("") + "</tr>";
                $("#csvTable tbody").append(tr);
            });
            //set background color and text color of groups
            $("#csvTable tbody tr").each(function() {
                var target = $(this).find("td").eq(3);
                var group = target.text();
                target.css("background-color", colors[group]);
                target.css("color", dark_colors[group]);
            });
            //set default show entries to 100
            $('#csvTable').DataTable({
                "pageLength": 100,
                "responsive": true
            });
        });
    </script>
</body>
</html>